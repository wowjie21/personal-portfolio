<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Jump Mini</title>
  <style>
    html,body{height:100%;margin:0;display:grid;place-items:center;background:#f4f4f4;font-family:system-ui}
    canvas{border:1px solid #ddd;border-radius:12px;box-shadow:0 6px 20px rgba(0,0,0,.08)}
  </style>
</head>
<body>
<canvas id="game" width="480" height="320"></canvas>
<script>
const canvas = document.getElementById('game');
const ctx = canvas.getContext('2d');

// 常量
const GROUND_Y = 280;   // 地面 y 坐标
const GRAVITY  = 0.5;   // 重力
const JUMP_V   = -9;    // 起跳速度

// 玩家
const player = { x: 50, y: GROUND_Y - 20, w: 20, h: 20, vy: 0, onGround: true };

function jump(){
  if (player.onGround) {
    player.vy = JUMP_V;
    player.onGround = false;
  }
}

// 键盘 & 触控
window.addEventListener('keydown', (e)=>{
  if (e.code === 'Space' || e.code === 'ArrowUp') {
    e.preventDefault(); // 防止空格滚动页面导致“卡住”的错觉
    jump();
  }
});
canvas.addEventListener('pointerdown', jump);

function update(){
  // 物理更新
  player.vy += GRAVITY;
  player.y  += player.vy;

  // 与地面碰撞
  if (player.y + player.h >= GROUND_Y){
    player.y = GROUND_Y - player.h;
    player.vy = 0;
    player.onGround = true;
  }

  // 绘制
  ctx.clearRect(0,0,canvas.width,canvas.height);
  // 地面
  ctx.fillStyle = '#3a7';
  ctx.fillRect(0,GROUND_Y,canvas.width,canvas.height-GROUND_Y);
  // 玩家
  ctx.fillStyle = '#e33';
  ctx.fillRect(player.x, player.y, player.w, player.h);

  requestAnimationFrame(update);
}
update();
</script>
</body>
</html>
